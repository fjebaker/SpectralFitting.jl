<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Surrogate models · SpectralFitting.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="SpectralFitting.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">SpectralFitting.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../why-and-how/">Why &amp; How</a></li><li><span class="tocitem">Models</span><ul><li><a class="tocitem" href="../using-models/">Using models</a></li><li><a class="tocitem" href="../models/">Model index</a></li><li><a class="tocitem" href="../composite-models/">Composite models</a></li><li class="is-active"><a class="tocitem" href>Surrogate models</a><ul class="internal"><li><a class="tocitem" href="#Surrogates-overview"><span>Surrogates overview</span></a></li><li><a class="tocitem" href="#Creating-a-surrogate-for-XS_PhotoelectricAbsorption"><span>Creating a surrogate for <code>XS_PhotoelectricAbsorption</code></span></a></li><li><a class="tocitem" href="#Using-a-surrogate-spectral-model"><span>Using a surrogate spectral model</span></a></li><li><a class="tocitem" href="#Sharing-surrogate-models"><span>Sharing surrogate models</span></a></li></ul></li></ul></li><li><a class="tocitem" href="../reference/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Models</a></li><li class="is-active"><a href>Surrogate models</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Surrogate models</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/fjebaker/SpectralFitting.jl/blob/main/docs/src/surrogate-models.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Surrogate-models"><a class="docs-heading-anchor" href="#Surrogate-models">Surrogate models</a><a id="Surrogate-models-1"></a><a class="docs-heading-anchor-permalink" href="#Surrogate-models" title="Permalink"></a></h1><p>Surrogate models allow you to create fast or memory efficient approximations of model components, or assist in optimizing some objective function directly. SpectralFitting uses the <a href="https://github.com/SciML/Surrogates.jl">Surrogates.jl</a> library of models, that yields pure-Julia surrogate models. Consequently, surrogate models also permit use of automatic differentiation in fitting, and are therefore powerful tools for improving fitting performance.</p><h2 id="Surrogates-overview"><a class="docs-heading-anchor" href="#Surrogates-overview">Surrogates overview</a><a id="Surrogates-overview-1"></a><a class="docs-heading-anchor-permalink" href="#Surrogates-overview" title="Permalink"></a></h2><p>Any function may be wrapped as a surrogate model using the <a href="#SpectralFitting.SurrogateSpectralModel"><code>SurrogateSpectralModel</code></a> type.</p><article class="docstring"><header><a class="docstring-binding" id="SpectralFitting.SurrogateSpectralModel" href="#SpectralFitting.SurrogateSpectralModel"><code>SpectralFitting.SurrogateSpectralModel</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SurrogateSpectralModel &lt;: AbstractSpectralModel
SurrogateSpectralModel(modelkind, surrogate, params, params_symbols)</code></pre><p>Used to wrap a surrogate function into an <a href="../using-models/#SpectralFitting.AbstractSpectralModel"><code>AbstractSpectralModel</code></a>.</p><p><strong>Example</strong></p><p>Creating a surrogate function using <a href="#SpectralFitting.make_surrogate_function"><code>make_surrogate_function</code></a>:</p><pre><code class="language-julia hljs"># build and optimize a surrogate model
surrogate = make_surrogate_function(model, lower_bounds, upper_bounds)

# create surrogate spectral model
sm = SurrogateSpectralModel(
    Multiplicative(),
    surrogate,
    (FitParam(1.0),),
    (:ηH,)
)</code></pre><p>The <code>lower_bounds</code> and <code>upper_bounds</code> must be tuples in the form <code>(E, params...)</code>, where <code>E</code> denotes the bounds on the energy range to train over.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fjebaker/SpectralFitting.jl/blob/383f1b5022344c6481f0ee8575eaae0490a8659c/src/surrogate-models.jl#L1-L25">source</a></section></article><p>To facilitate easy surrogate builds, SpectralFitting exports a number of utility functions.</p><article class="docstring"><header><a class="docstring-binding" id="SpectralFitting.make_surrogate_function" href="#SpectralFitting.make_surrogate_function"><code>SpectralFitting.make_surrogate_function</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">make_surrogate_function(
    model::M,
    lowerbounds::T,
    upperbounds::T;
    optimization_samples = 200,
    seed_samples = 50,
    S::Type = RadialBasis,
    sample_type = SobolSample(),
    verbose = false,
)</code></pre><p>Creates and optimizes a surrogate model of type <code>S</code> for <code>model</code>, using <a href="../reference/#SpectralFitting.wrap_model_as_objective"><code>wrap_model_as_objective</code></a> and  <a href="#SpectralFitting.optimize_accuracy!"><code>optimize_accuracy!</code></a> for <code>optimization_samples</code> iterations. Model is initially seeded with <code>seed_samples</code> points prior to optimization.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>Additive models integrate energies to calculate flux, which surrogate models are currently not capable of. Results for Additive models likely to be inaccurate. This will be patched in a future version.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fjebaker/SpectralFitting.jl/blob/383f1b5022344c6481f0ee8575eaae0490a8659c/src/surrogate-models.jl#L172-L192">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SpectralFitting.optimize_accuracy!" href="#SpectralFitting.optimize_accuracy!"><code>SpectralFitting.optimize_accuracy!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">optimize_accuracy!(
    surr::AbstractSurrogate,
    obj::Function,
    lb,
    ub;
    sample_type::SamplingAlgorithm = SobolSample(),
    maxiters = 200,
    N_truth = 5000,
    verbose = false,
)</code></pre><p>Improve accuracy (faithfullness) of the surrogate model in recreating the objective function.</p><p>Samples a new space of <code>N_truth</code> points between <code>lb</code> and <code>ub</code>, and calculates the objective function <code>obj</code> at each. Finds the point with largest MSE between surrogate and objective, and adds the point to the surrogate pool. Repeats <code>maxiters</code> times, adding <code>maxiters</code> points to surrogate model.</p><p>Optionally print to stdout the MSE and iteration count with <code>verbose = true</code>.</p><p>Note that upper- and lower-bounds should be in the form <code>(E, params...)</code>, where <code>E</code> is a single energy and <code>params</code> are the model parameters.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fjebaker/SpectralFitting.jl/blob/383f1b5022344c6481f0ee8575eaae0490a8659c/src/surrogate-models.jl#L93-L116">source</a></section></article><h2 id="Creating-a-surrogate-for-XS_PhotoelectricAbsorption"><a class="docs-heading-anchor" href="#Creating-a-surrogate-for-XS_PhotoelectricAbsorption">Creating a surrogate for <code>XS_PhotoelectricAbsorption</code></a><a id="Creating-a-surrogate-for-XS_PhotoelectricAbsorption-1"></a><a class="docs-heading-anchor-permalink" href="#Creating-a-surrogate-for-XS_PhotoelectricAbsorption" title="Permalink"></a></h2><p>Before we start, let us discuss a number of benefits the use of surrogate models may bring us:</p><ul><li><a href="#SpectralFitting.SurrogateSpectralModel"><code>SurrogateSpectralModel</code></a> permit use of automatic differentiation.</li><li>Surrogate models may be allocation-free depending on setup, whereas XSPEC wrappers will always have to allocate for type-conversions.</li><li>Surrogate models may be considerably faster, especially for table models.</li><li>Surrogate models are shareable (see <a href="#Sharing-surrogate-models">Sharing surrogate models</a>), and are tunable in size.</li></ul><p><a href="../models/#SpectralFitting.XS_PhotoelectricAbsorption"><code>XS_PhotoelectricAbsorption</code></a> is an XSPEC model that is wrapped by a thin C-wrapper into Julia. The implementation of this model is a number of Fortran routines from the late 90s, including a tabulation of ~3000 lines of data that has been copied directly into the Fortran source code.</p><p>The performance of this model represents its complexity.</p><pre><code class="language-julia hljs">energy = collect(range(0.1, 20.0, 100))
flux = make_flux(energy)

model = XS_PhotoelectricAbsorption()</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">XS_PhotoelectricAbsorption
   ηH  =&gt; (1 ± 0.1)
</code></pre><p>Benchmarking with <a href="https://juliaci.github.io/BenchmarkTools.jl/stable/">BenchmarkTools.jl</a>:</p><pre><code class="language-julia hljs">using BenchmarkTools
@btime invokemodel!($flux, $energy, $model);</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">  2.302 ms (3 allocations: 112 bytes)
</code><button class="copy-button fas fa-copy"></button></pre><p>The surrogate we&#39;ll construct will have to be tailored a little to the data we wish to fit, as we need to specify the parameter ranges our surrogate should learn. For example, we might be interested in energies between <span>$0.1$</span> and <span>$20$</span> keV, with equivalent hydrogen column <span>$\eta$</span>H anywhere between <span>$10^{-3}$</span> and <span>$30$</span>. We specify these bounds using tuples</p><pre><code class="language-julia hljs">lower_bounds = (0.1, 1e-3)
upper_bounds = (20.0, 30.0)</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>The first index is always the energy bounds, and the subsequent indices are the parameters in the same order they are defined in the model structure.</p></div></div><p>Next, we use <a href="#SpectralFitting.make_surrogate_function"><code>make_surrogate_function</code></a> to build and optimize a surrogate function for our model. By default, the surrogate uses linear radial basis functions, and seeds the coefficients with a number of seed points. This function then improves the accuracy of the model using <a href="#SpectralFitting.optimize_accuracy!"><code>optimize_accuracy!</code></a>, until a maximal number of iterations has been reached.</p><p>For illustration purposes, we&#39;ll omit the accuracy improving step, and perform this ourselves. We can do this by setting <code>optimization_samples = 0</code> in the keyword arguments:</p><pre><code class="language-julia hljs">surrogate = make_surrogate_function(
    model,
    lower_bounds,
    upper_bounds
    ;
    optimization_samples = 0
)

# number of points the surrogate has been trained on
length(surrogate.x)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">50</code></pre><p>We can examine how well our surrogate reconstructs the model for a given test parameter:</p><pre><code class="language-julia hljs"># random test value
ηh_test = rand(1.0:30.0)

f = invokemodel(energy, model, ηh_test)

f̂ = map(energy[1:end-1]) do e
    v = (e, ηh_test)
    surrogate(v)
end</code></pre><?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="600" height="400" viewBox="0 0 2400 1600">
<defs>
  <clipPath id="clip650">
    <rect x="0" y="0" width="2400" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip650)" d="
M0 1600 L2400 1600 L2400 0 L0 0  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip651">
    <rect x="480" y="0" width="1681" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip650)" d="
M186.274 1423.18 L2352.76 1423.18 L2352.76 47.2441 L186.274 47.2441  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip652">
    <rect x="186" y="47" width="2167" height="1377"/>
  </clipPath>
</defs>
<polyline clip-path="url(#clip652)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  237.214,1423.18 237.214,47.2441 
  "/>
<polyline clip-path="url(#clip652)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  755.985,1423.18 755.985,47.2441 
  "/>
<polyline clip-path="url(#clip652)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1274.76,1423.18 1274.76,47.2441 
  "/>
<polyline clip-path="url(#clip652)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1793.53,1423.18 1793.53,47.2441 
  "/>
<polyline clip-path="url(#clip652)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  2312.3,1423.18 2312.3,47.2441 
  "/>
<polyline clip-path="url(#clip650)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  186.274,1423.18 2352.76,1423.18 
  "/>
<polyline clip-path="url(#clip650)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  237.214,1423.18 237.214,1404.28 
  "/>
<polyline clip-path="url(#clip650)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  755.985,1423.18 755.985,1404.28 
  "/>
<polyline clip-path="url(#clip650)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1274.76,1423.18 1274.76,1404.28 
  "/>
<polyline clip-path="url(#clip650)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1793.53,1423.18 1793.53,1404.28 
  "/>
<polyline clip-path="url(#clip650)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  2312.3,1423.18 2312.3,1404.28 
  "/>
<path clip-path="url(#clip650)" d="M237.214 1454.1 Q233.603 1454.1 231.774 1457.66 Q229.969 1461.2 229.969 1468.33 Q229.969 1475.44 231.774 1479.01 Q233.603 1482.55 237.214 1482.55 Q240.848 1482.55 242.654 1479.01 Q244.483 1475.44 244.483 1468.33 Q244.483 1461.2 242.654 1457.66 Q240.848 1454.1 237.214 1454.1 M237.214 1450.39 Q243.024 1450.39 246.08 1455 Q249.158 1459.58 249.158 1468.33 Q249.158 1477.06 246.08 1481.67 Q243.024 1486.25 237.214 1486.25 Q231.404 1486.25 228.325 1481.67 Q225.27 1477.06 225.27 1468.33 Q225.27 1459.58 228.325 1455 Q231.404 1450.39 237.214 1450.39 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M746.262 1451.02 L764.619 1451.02 L764.619 1454.96 L750.545 1454.96 L750.545 1463.43 Q751.563 1463.08 752.582 1462.92 Q753.6 1462.73 754.619 1462.73 Q760.406 1462.73 763.785 1465.9 Q767.165 1469.08 767.165 1474.49 Q767.165 1480.07 763.693 1483.17 Q760.221 1486.25 753.901 1486.25 Q751.725 1486.25 749.457 1485.88 Q747.211 1485.51 744.804 1484.77 L744.804 1480.07 Q746.887 1481.2 749.11 1481.76 Q751.332 1482.32 753.809 1482.32 Q757.813 1482.32 760.151 1480.21 Q762.489 1478.1 762.489 1474.49 Q762.489 1470.88 760.151 1468.77 Q757.813 1466.67 753.809 1466.67 Q751.934 1466.67 750.059 1467.08 Q748.207 1467.5 746.262 1468.38 L746.262 1451.02 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M1249.44 1481.64 L1257.08 1481.64 L1257.08 1455.28 L1248.77 1456.95 L1248.77 1452.69 L1257.04 1451.02 L1261.71 1451.02 L1261.71 1481.64 L1269.35 1481.64 L1269.35 1485.58 L1249.44 1485.58 L1249.44 1481.64 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M1288.79 1454.1 Q1285.18 1454.1 1283.35 1457.66 Q1281.55 1461.2 1281.55 1468.33 Q1281.55 1475.44 1283.35 1479.01 Q1285.18 1482.55 1288.79 1482.55 Q1292.43 1482.55 1294.23 1479.01 Q1296.06 1475.44 1296.06 1468.33 Q1296.06 1461.2 1294.23 1457.66 Q1292.43 1454.1 1288.79 1454.1 M1288.79 1450.39 Q1294.6 1450.39 1297.66 1455 Q1300.74 1459.58 1300.74 1468.33 Q1300.74 1477.06 1297.66 1481.67 Q1294.6 1486.25 1288.79 1486.25 Q1282.98 1486.25 1279.91 1481.67 Q1276.85 1477.06 1276.85 1468.33 Q1276.85 1459.58 1279.91 1455 Q1282.98 1450.39 1288.79 1450.39 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M1768.71 1481.64 L1776.35 1481.64 L1776.35 1455.28 L1768.04 1456.95 L1768.04 1452.69 L1776.3 1451.02 L1780.98 1451.02 L1780.98 1481.64 L1788.62 1481.64 L1788.62 1485.58 L1768.71 1485.58 L1768.71 1481.64 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M1798.11 1451.02 L1816.47 1451.02 L1816.47 1454.96 L1802.39 1454.96 L1802.39 1463.43 Q1803.41 1463.08 1804.43 1462.92 Q1805.45 1462.73 1806.47 1462.73 Q1812.25 1462.73 1815.63 1465.9 Q1819.01 1469.08 1819.01 1474.49 Q1819.01 1480.07 1815.54 1483.17 Q1812.07 1486.25 1805.75 1486.25 Q1803.57 1486.25 1801.3 1485.88 Q1799.06 1485.51 1796.65 1484.77 L1796.65 1480.07 Q1798.73 1481.2 1800.96 1481.76 Q1803.18 1482.32 1805.66 1482.32 Q1809.66 1482.32 1812 1480.21 Q1814.34 1478.1 1814.34 1474.49 Q1814.34 1470.88 1812 1468.77 Q1809.66 1466.67 1805.66 1466.67 Q1803.78 1466.67 1801.91 1467.08 Q1800.05 1467.5 1798.11 1468.38 L1798.11 1451.02 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M2291.07 1481.64 L2307.39 1481.64 L2307.39 1485.58 L2285.44 1485.58 L2285.44 1481.64 Q2288.11 1478.89 2292.69 1474.26 Q2297.3 1469.61 2298.48 1468.27 Q2300.72 1465.74 2301.6 1464.01 Q2302.5 1462.25 2302.5 1460.56 Q2302.5 1457.8 2300.56 1456.07 Q2298.64 1454.33 2295.54 1454.33 Q2293.34 1454.33 2290.88 1455.09 Q2288.45 1455.86 2285.68 1457.41 L2285.68 1452.69 Q2288.5 1451.55 2290.95 1450.97 Q2293.41 1450.39 2295.44 1450.39 Q2300.81 1450.39 2304.01 1453.08 Q2307.2 1455.77 2307.2 1460.26 Q2307.2 1462.39 2306.39 1464.31 Q2305.61 1466.2 2303.5 1468.8 Q2302.92 1469.47 2299.82 1472.69 Q2296.72 1475.88 2291.07 1481.64 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M2327.2 1454.1 Q2323.59 1454.1 2321.76 1457.66 Q2319.96 1461.2 2319.96 1468.33 Q2319.96 1475.44 2321.76 1479.01 Q2323.59 1482.55 2327.2 1482.55 Q2330.84 1482.55 2332.64 1479.01 Q2334.47 1475.44 2334.47 1468.33 Q2334.47 1461.2 2332.64 1457.66 Q2330.84 1454.1 2327.2 1454.1 M2327.2 1450.39 Q2333.01 1450.39 2336.07 1455 Q2339.15 1459.58 2339.15 1468.33 Q2339.15 1477.06 2336.07 1481.67 Q2333.01 1486.25 2327.2 1486.25 Q2321.39 1486.25 2318.31 1481.67 Q2315.26 1477.06 2315.26 1468.33 Q2315.26 1459.58 2318.31 1455 Q2321.39 1450.39 2327.2 1450.39 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M1159.07 1520.52 L1189.12 1520.52 L1189.12 1525.93 L1165.5 1525.93 L1165.5 1540 L1188.13 1540 L1188.13 1545.41 L1165.5 1545.41 L1165.5 1562.63 L1189.69 1562.63 L1189.69 1568.04 L1159.07 1568.04 L1159.07 1520.52 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M1234.79 1518.58 Q1230.53 1525.9 1228.46 1533.06 Q1226.39 1540.23 1226.39 1547.58 Q1226.39 1554.93 1228.46 1562.16 Q1230.56 1569.35 1234.79 1576.64 L1229.7 1576.64 Q1224.92 1569.16 1222.54 1561.93 Q1220.18 1554.71 1220.18 1547.58 Q1220.18 1540.48 1222.54 1533.29 Q1224.89 1526.09 1229.7 1518.58 L1234.79 1518.58 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M1245.93 1518.52 L1251.82 1518.52 L1251.82 1547.77 L1269.29 1532.4 L1276.77 1532.4 L1257.87 1549.07 L1277.57 1568.04 L1269.93 1568.04 L1251.82 1550.63 L1251.82 1568.04 L1245.93 1568.04 L1245.93 1518.52 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M1312.07 1548.76 L1312.07 1551.62 L1285.14 1551.62 Q1285.52 1557.67 1288.77 1560.85 Q1292.05 1564 1297.87 1564 Q1301.25 1564 1304.4 1563.17 Q1307.58 1562.35 1310.7 1560.69 L1310.7 1566.23 Q1307.55 1567.57 1304.24 1568.27 Q1300.93 1568.97 1297.52 1568.97 Q1288.99 1568.97 1284 1564 Q1279.03 1559.04 1279.03 1550.57 Q1279.03 1541.82 1283.74 1536.69 Q1288.48 1531.54 1296.51 1531.54 Q1303.7 1531.54 1307.87 1536.18 Q1312.07 1540.8 1312.07 1548.76 M1306.21 1547.04 Q1306.15 1542.23 1303.51 1539.37 Q1300.9 1536.5 1296.57 1536.5 Q1291.67 1536.5 1288.71 1539.27 Q1285.78 1542.04 1285.33 1547.07 L1306.21 1547.04 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M1334.19 1568.04 L1316.05 1520.52 L1322.76 1520.52 L1337.82 1560.53 L1352.91 1520.52 L1359.59 1520.52 L1341.48 1568.04 L1334.19 1568.04 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M1365.35 1518.58 L1370.44 1518.58 Q1375.22 1526.09 1377.57 1533.29 Q1379.96 1540.48 1379.96 1547.58 Q1379.96 1554.71 1377.57 1561.93 Q1375.22 1569.16 1370.44 1576.64 L1365.35 1576.64 Q1369.58 1569.35 1371.65 1562.16 Q1373.75 1554.93 1373.75 1547.58 Q1373.75 1540.23 1371.65 1533.06 Q1369.58 1525.9 1365.35 1518.58 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><polyline clip-path="url(#clip652)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  186.274,1384.24 2352.76,1384.24 
  "/>
<polyline clip-path="url(#clip652)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  186.274,1072.99 2352.76,1072.99 
  "/>
<polyline clip-path="url(#clip652)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  186.274,761.747 2352.76,761.747 
  "/>
<polyline clip-path="url(#clip652)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  186.274,450.501 2352.76,450.501 
  "/>
<polyline clip-path="url(#clip652)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  186.274,139.256 2352.76,139.256 
  "/>
<polyline clip-path="url(#clip650)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  186.274,1423.18 186.274,47.2441 
  "/>
<polyline clip-path="url(#clip650)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  186.274,1384.24 205.172,1384.24 
  "/>
<polyline clip-path="url(#clip650)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  186.274,1072.99 205.172,1072.99 
  "/>
<polyline clip-path="url(#clip650)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  186.274,761.747 205.172,761.747 
  "/>
<polyline clip-path="url(#clip650)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  186.274,450.501 205.172,450.501 
  "/>
<polyline clip-path="url(#clip650)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  186.274,139.256 205.172,139.256 
  "/>
<path clip-path="url(#clip650)" d="M62.9365 1370.04 Q59.3254 1370.04 57.4967 1373.6 Q55.6912 1377.14 55.6912 1384.27 Q55.6912 1391.38 57.4967 1394.94 Q59.3254 1398.49 62.9365 1398.49 Q66.5707 1398.49 68.3763 1394.94 Q70.205 1391.38 70.205 1384.27 Q70.205 1377.14 68.3763 1373.6 Q66.5707 1370.04 62.9365 1370.04 M62.9365 1366.33 Q68.7467 1366.33 71.8022 1370.94 Q74.8809 1375.52 74.8809 1384.27 Q74.8809 1393 71.8022 1397.61 Q68.7467 1402.19 62.9365 1402.19 Q57.1264 1402.19 54.0477 1397.61 Q50.9921 1393 50.9921 1384.27 Q50.9921 1375.52 54.0477 1370.94 Q57.1264 1366.33 62.9365 1366.33 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M83.0984 1395.64 L87.9827 1395.64 L87.9827 1401.52 L83.0984 1401.52 L83.0984 1395.64 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M108.168 1370.04 Q104.557 1370.04 102.728 1373.6 Q100.922 1377.14 100.922 1384.27 Q100.922 1391.38 102.728 1394.94 Q104.557 1398.49 108.168 1398.49 Q111.802 1398.49 113.608 1394.94 Q115.436 1391.38 115.436 1384.27 Q115.436 1377.14 113.608 1373.6 Q111.802 1370.04 108.168 1370.04 M108.168 1366.33 Q113.978 1366.33 117.033 1370.94 Q120.112 1375.52 120.112 1384.27 Q120.112 1393 117.033 1397.61 Q113.978 1402.19 108.168 1402.19 Q102.358 1402.19 99.2789 1397.61 Q96.2234 1393 96.2234 1384.27 Q96.2234 1375.52 99.2789 1370.94 Q102.358 1366.33 108.168 1366.33 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M138.33 1370.04 Q134.719 1370.04 132.89 1373.6 Q131.084 1377.14 131.084 1384.27 Q131.084 1391.38 132.89 1394.94 Q134.719 1398.49 138.33 1398.49 Q141.964 1398.49 143.769 1394.94 Q145.598 1391.38 145.598 1384.27 Q145.598 1377.14 143.769 1373.6 Q141.964 1370.04 138.33 1370.04 M138.33 1366.33 Q144.14 1366.33 147.195 1370.94 Q150.274 1375.52 150.274 1384.27 Q150.274 1393 147.195 1397.61 Q144.14 1402.19 138.33 1402.19 Q132.519 1402.19 129.441 1397.61 Q126.385 1393 126.385 1384.27 Q126.385 1375.52 129.441 1370.94 Q132.519 1366.33 138.33 1366.33 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M63.9319 1058.79 Q60.3208 1058.79 58.4921 1062.36 Q56.6865 1065.9 56.6865 1073.03 Q56.6865 1080.13 58.4921 1083.7 Q60.3208 1087.24 63.9319 1087.24 Q67.5661 1087.24 69.3717 1083.7 Q71.2004 1080.13 71.2004 1073.03 Q71.2004 1065.9 69.3717 1062.36 Q67.5661 1058.79 63.9319 1058.79 M63.9319 1055.09 Q69.742 1055.09 72.7976 1059.69 Q75.8763 1064.28 75.8763 1073.03 Q75.8763 1081.75 72.7976 1086.36 Q69.742 1090.94 63.9319 1090.94 Q58.1217 1090.94 55.043 1086.36 Q51.9875 1081.75 51.9875 1073.03 Q51.9875 1064.28 55.043 1059.69 Q58.1217 1055.09 63.9319 1055.09 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M84.0938 1084.39 L88.978 1084.39 L88.978 1090.27 L84.0938 1090.27 L84.0938 1084.39 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M103.191 1086.34 L119.51 1086.34 L119.51 1090.27 L97.566 1090.27 L97.566 1086.34 Q100.228 1083.58 104.811 1078.95 Q109.418 1074.3 110.598 1072.96 Q112.844 1070.43 113.723 1068.7 Q114.626 1066.94 114.626 1065.25 Q114.626 1062.49 112.682 1060.76 Q110.76 1059.02 107.658 1059.02 Q105.459 1059.02 103.006 1059.79 Q100.575 1060.55 97.7974 1062.1 L97.7974 1057.38 Q100.621 1056.24 103.075 1055.67 Q105.529 1055.09 107.566 1055.09 Q112.936 1055.09 116.131 1057.77 Q119.325 1060.46 119.325 1064.95 Q119.325 1067.08 118.515 1069 Q117.728 1070.9 115.621 1073.49 Q115.043 1074.16 111.941 1077.38 Q108.839 1080.57 103.191 1086.34 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M129.371 1055.71 L147.728 1055.71 L147.728 1059.65 L133.654 1059.65 L133.654 1068.12 Q134.672 1067.77 135.691 1067.61 Q136.709 1067.43 137.728 1067.43 Q143.515 1067.43 146.894 1070.6 Q150.274 1073.77 150.274 1079.18 Q150.274 1084.76 146.802 1087.87 Q143.33 1090.94 137.01 1090.94 Q134.834 1090.94 132.566 1090.57 Q130.32 1090.2 127.913 1089.46 L127.913 1084.76 Q129.996 1085.9 132.219 1086.45 Q134.441 1087.01 136.918 1087.01 Q140.922 1087.01 143.26 1084.9 Q145.598 1082.8 145.598 1079.18 Q145.598 1075.57 143.26 1073.47 Q140.922 1071.36 136.918 1071.36 Q135.043 1071.36 133.168 1071.78 Q131.316 1072.19 129.371 1073.07 L129.371 1055.71 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M62.9365 747.546 Q59.3254 747.546 57.4967 751.11 Q55.6912 754.652 55.6912 761.782 Q55.6912 768.888 57.4967 772.453 Q59.3254 775.995 62.9365 775.995 Q66.5707 775.995 68.3763 772.453 Q70.205 768.888 70.205 761.782 Q70.205 754.652 68.3763 751.11 Q66.5707 747.546 62.9365 747.546 M62.9365 743.842 Q68.7467 743.842 71.8022 748.448 Q74.8809 753.032 74.8809 761.782 Q74.8809 770.508 71.8022 775.115 Q68.7467 779.698 62.9365 779.698 Q57.1264 779.698 54.0477 775.115 Q50.9921 770.508 50.9921 761.782 Q50.9921 753.032 54.0477 748.448 Q57.1264 743.842 62.9365 743.842 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M83.0984 773.147 L87.9827 773.147 L87.9827 779.027 L83.0984 779.027 L83.0984 773.147 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M98.2141 744.467 L116.57 744.467 L116.57 748.402 L102.496 748.402 L102.496 756.874 Q103.515 756.527 104.534 756.365 Q105.552 756.18 106.571 756.18 Q112.358 756.18 115.737 759.351 Q119.117 762.522 119.117 767.939 Q119.117 773.518 115.645 776.62 Q112.172 779.698 105.853 779.698 Q103.677 779.698 101.409 779.328 Q99.1632 778.957 96.7558 778.217 L96.7558 773.518 Q98.8391 774.652 101.061 775.208 Q103.284 775.763 105.76 775.763 Q109.765 775.763 112.103 773.657 Q114.441 771.55 114.441 767.939 Q114.441 764.328 112.103 762.221 Q109.765 760.115 105.76 760.115 Q103.885 760.115 102.01 760.532 Q100.159 760.948 98.2141 761.828 L98.2141 744.467 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M138.33 747.546 Q134.719 747.546 132.89 751.11 Q131.084 754.652 131.084 761.782 Q131.084 768.888 132.89 772.453 Q134.719 775.995 138.33 775.995 Q141.964 775.995 143.769 772.453 Q145.598 768.888 145.598 761.782 Q145.598 754.652 143.769 751.11 Q141.964 747.546 138.33 747.546 M138.33 743.842 Q144.14 743.842 147.195 748.448 Q150.274 753.032 150.274 761.782 Q150.274 770.508 147.195 775.115 Q144.14 779.698 138.33 779.698 Q132.519 779.698 129.441 775.115 Q126.385 770.508 126.385 761.782 Q126.385 753.032 129.441 748.448 Q132.519 743.842 138.33 743.842 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M63.9319 436.3 Q60.3208 436.3 58.4921 439.865 Q56.6865 443.406 56.6865 450.536 Q56.6865 457.642 58.4921 461.207 Q60.3208 464.749 63.9319 464.749 Q67.5661 464.749 69.3717 461.207 Q71.2004 457.642 71.2004 450.536 Q71.2004 443.406 69.3717 439.865 Q67.5661 436.3 63.9319 436.3 M63.9319 432.596 Q69.742 432.596 72.7976 437.203 Q75.8763 441.786 75.8763 450.536 Q75.8763 459.263 72.7976 463.869 Q69.742 468.453 63.9319 468.453 Q58.1217 468.453 55.043 463.869 Q51.9875 459.263 51.9875 450.536 Q51.9875 441.786 55.043 437.203 Q58.1217 432.596 63.9319 432.596 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M84.0938 461.902 L88.978 461.902 L88.978 467.781 L84.0938 467.781 L84.0938 461.902 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M97.9826 433.221 L120.205 433.221 L120.205 435.212 L107.658 467.781 L102.774 467.781 L114.58 437.156 L97.9826 437.156 L97.9826 433.221 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M129.371 433.221 L147.728 433.221 L147.728 437.156 L133.654 437.156 L133.654 445.629 Q134.672 445.281 135.691 445.119 Q136.709 444.934 137.728 444.934 Q143.515 444.934 146.894 448.105 Q150.274 451.277 150.274 456.693 Q150.274 462.272 146.802 465.374 Q143.33 468.453 137.01 468.453 Q134.834 468.453 132.566 468.082 Q130.32 467.712 127.913 466.971 L127.913 462.272 Q129.996 463.406 132.219 463.962 Q134.441 464.517 136.918 464.517 Q140.922 464.517 143.26 462.411 Q145.598 460.304 145.598 456.693 Q145.598 453.082 143.26 450.976 Q140.922 448.869 136.918 448.869 Q135.043 448.869 133.168 449.286 Q131.316 449.703 129.371 450.582 L129.371 433.221 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M53.7467 152.6 L61.3856 152.6 L61.3856 126.235 L53.0754 127.901 L53.0754 123.642 L61.3393 121.976 L66.0152 121.976 L66.0152 152.6 L73.654 152.6 L73.654 156.536 L53.7467 156.536 L53.7467 152.6 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M83.0984 150.656 L87.9827 150.656 L87.9827 156.536 L83.0984 156.536 L83.0984 150.656 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M108.168 125.054 Q104.557 125.054 102.728 128.619 Q100.922 132.161 100.922 139.29 Q100.922 146.397 102.728 149.962 Q104.557 153.503 108.168 153.503 Q111.802 153.503 113.608 149.962 Q115.436 146.397 115.436 139.29 Q115.436 132.161 113.608 128.619 Q111.802 125.054 108.168 125.054 M108.168 121.351 Q113.978 121.351 117.033 125.957 Q120.112 130.54 120.112 139.29 Q120.112 148.017 117.033 152.624 Q113.978 157.207 108.168 157.207 Q102.358 157.207 99.2789 152.624 Q96.2234 148.017 96.2234 139.29 Q96.2234 130.54 99.2789 125.957 Q102.358 121.351 108.168 121.351 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M138.33 125.054 Q134.719 125.054 132.89 128.619 Q131.084 132.161 131.084 139.29 Q131.084 146.397 132.89 149.962 Q134.719 153.503 138.33 153.503 Q141.964 153.503 143.769 149.962 Q145.598 146.397 145.598 139.29 Q145.598 132.161 143.769 128.619 Q141.964 125.054 138.33 125.054 M138.33 121.351 Q144.14 121.351 147.195 125.957 Q150.274 130.54 150.274 139.29 Q150.274 148.017 147.195 152.624 Q144.14 157.207 138.33 157.207 Q132.519 157.207 129.441 152.624 Q126.385 148.017 126.385 139.29 Q126.385 130.54 129.441 125.957 Q132.519 121.351 138.33 121.351 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><polyline clip-path="url(#clip652)" style="stroke:#009af9; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  247.59,1384.24 268.445,1384.24 289.301,1384.24 310.156,1384.23 331.012,1383.71 351.868,1373.21 372.723,1331.41 393.579,1254.6 414.434,1155.88 435.29,1054.35 
  456.146,933.589 477.001,834.327 497.857,750.013 518.713,664.334 539.568,591.137 560.424,531.884 581.279,482.324 602.135,437.528 622.991,399.625 643.846,369.483 
  664.702,344.019 685.558,320.332 706.413,300.012 727.269,282.512 748.124,267.381 768.98,254.246 789.836,242.799 810.691,232.787 831.547,223.996 852.403,216.558 
  873.258,209.997 894.114,203.882 914.969,198.441 935.825,193.584 956.681,217.05 977.536,238.654 998.392,231.766 1019.25,225.535 1040.1,219.848 1060.96,214.602 
  1081.81,209.796 1102.67,206.233 1123.53,202.982 1144.38,199.158 1165.24,195.63 1186.09,192.372 1206.95,189.357 1227.8,186.564 1248.66,183.973 1269.51,181.567 
  1290.37,179.328 1311.23,177.244 1332.08,175.3 1352.94,173.486 1373.79,171.791 1394.65,170.205 1415.5,168.72 1436.36,167.328 1457.22,166.021 1478.07,164.794 
  1498.93,163.641 1519.78,162.555 1540.64,161.533 1561.49,160.569 1582.35,159.66 1603.2,158.801 1624.06,157.99 1644.92,157.222 1665.77,156.496 1686.63,155.808 
  1707.48,155.156 1728.34,154.538 1749.19,153.951 1770.05,153.394 1790.91,152.864 1811.76,152.361 1832.62,151.882 1853.47,151.425 1874.33,150.991 1895.18,150.576 
  1916.04,150.181 1936.89,149.804 1957.75,149.444 1978.61,149.101 1999.46,148.772 2020.32,148.458 2041.17,148.157 2062.03,147.869 2082.88,147.594 2103.74,147.33 
  2124.6,147.077 2145.45,146.834 2166.31,146.602 2187.16,146.378 2208.02,146.164 2228.87,145.958 2249.73,145.76 2270.58,145.57 2291.44,145.387 
  "/>
<polyline clip-path="url(#clip652)" style="stroke:#e26f46; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  247.59,1031.23 268.445,1016.98 289.301,1001.82 310.156,985.725 331.012,968.659 351.868,950.587 372.723,931.462 393.579,911.199 414.434,889.637 435.29,866.449 
  456.146,840.982 477.001,812.099 497.857,778.569 518.713,740.362 539.568,698.854 560.424,655.551 581.279,611.487 602.135,567.341 622.991,523.631 643.846,480.844 
  664.702,439.539 685.558,400.451 706.413,364.568 727.269,333.025 748.124,306.568 768.98,285.022 789.836,267.538 810.691,253.226 831.547,241.419 852.403,231.651 
  873.258,223.587 894.114,216.961 914.969,211.559 935.825,207.194 956.681,203.705 977.536,200.946 998.392,198.781 1019.25,197.078 1040.1,195.708 1060.96,194.538 
  1081.81,193.438 1102.67,192.292 1123.53,191.011 1144.38,189.551 1165.24,187.915 1186.09,186.138 1206.95,184.277 1227.8,182.385 1248.66,180.509 1269.51,178.686 
  1290.37,176.941 1311.23,175.29 1332.08,173.743 1352.94,172.304 1373.79,170.971 1394.65,169.739 1415.5,168.593 1436.36,167.508 1457.22,166.439 1478.07,165.354 
  1498.93,164.272 1519.78,163.223 1540.64,162.22 1561.49,161.266 1582.35,160.358 1603.2,159.488 1624.06,158.648 1644.92,157.833 1665.77,157.042 1686.63,156.298 
  1707.48,155.661 1728.34,155.134 1749.19,154.625 1770.05,154.074 1790.91,153.452 1811.76,152.739 1832.62,151.917 1853.47,150.966 1874.33,149.871 1895.18,148.612 
  1916.04,147.173 1936.89,145.539 1957.75,143.698 1978.61,141.64 1999.46,139.361 2020.32,136.855 2041.17,134.123 2062.03,131.164 2082.88,127.983 2103.74,124.586 
  2124.6,120.982 2145.45,117.182 2166.31,113.197 2187.16,109.042 2208.02,104.732 2228.87,100.278 2249.73,95.6952 2270.58,90.9941 2291.44,86.1857 
  "/>
<path clip-path="url(#clip650)" d="
M1900.95 1377.32 L2280.54 1377.32 L2280.54 1221.8 L1900.95 1221.8  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<polyline clip-path="url(#clip650)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1900.95,1377.32 2280.54,1377.32 2280.54,1221.8 1900.95,1221.8 1900.95,1377.32 
  "/>
<polyline clip-path="url(#clip650)" style="stroke:#009af9; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1925.03,1273.64 2069.46,1273.64 
  "/>
<path clip-path="url(#clip650)" d="M2113.88 1269.97 Q2115.48 1267.1 2117.7 1265.73 Q2119.92 1264.36 2122.93 1264.36 Q2126.98 1264.36 2129.18 1267.21 Q2131.38 1270.04 2131.38 1275.27 L2131.38 1290.92 L2127.1 1290.92 L2127.1 1275.41 Q2127.1 1271.68 2125.78 1269.87 Q2124.46 1268.07 2121.75 1268.07 Q2118.44 1268.07 2116.52 1270.27 Q2114.6 1272.47 2114.6 1276.26 L2114.6 1290.92 L2110.31 1290.92 L2110.31 1275.41 Q2110.31 1271.66 2108.99 1269.87 Q2107.67 1268.07 2104.92 1268.07 Q2101.66 1268.07 2099.73 1270.29 Q2097.81 1272.49 2097.81 1276.26 L2097.81 1290.92 L2093.53 1290.92 L2093.53 1264.99 L2097.81 1264.99 L2097.81 1269.02 Q2099.27 1266.63 2101.31 1265.5 Q2103.35 1264.36 2106.15 1264.36 Q2108.97 1264.36 2110.94 1265.8 Q2112.93 1267.23 2113.88 1269.97 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M2149.92 1267.98 Q2146.49 1267.98 2144.5 1270.66 Q2142.51 1273.32 2142.51 1277.98 Q2142.51 1282.63 2144.48 1285.31 Q2146.47 1287.98 2149.92 1287.98 Q2153.32 1287.98 2155.31 1285.29 Q2157.3 1282.61 2157.3 1277.98 Q2157.3 1273.37 2155.31 1270.68 Q2153.32 1267.98 2149.92 1267.98 M2149.92 1264.36 Q2155.47 1264.36 2158.65 1267.98 Q2161.82 1271.59 2161.82 1277.98 Q2161.82 1284.34 2158.65 1287.98 Q2155.47 1291.59 2149.92 1291.59 Q2144.34 1291.59 2141.17 1287.98 Q2138.02 1284.34 2138.02 1277.98 Q2138.02 1271.59 2141.17 1267.98 Q2144.34 1264.36 2149.92 1264.36 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M2185.94 1268.92 L2185.94 1254.9 L2190.2 1254.9 L2190.2 1290.92 L2185.94 1290.92 L2185.94 1287.03 Q2184.6 1289.34 2182.53 1290.48 Q2180.5 1291.59 2177.63 1291.59 Q2172.93 1291.59 2169.97 1287.84 Q2167.03 1284.09 2167.03 1277.98 Q2167.03 1271.86 2169.97 1268.11 Q2172.93 1264.36 2177.63 1264.36 Q2180.5 1264.36 2182.53 1265.5 Q2184.6 1266.61 2185.94 1268.92 M2171.42 1277.98 Q2171.42 1282.67 2173.35 1285.36 Q2175.29 1288.02 2178.67 1288.02 Q2182.05 1288.02 2183.99 1285.36 Q2185.94 1282.67 2185.94 1277.98 Q2185.94 1273.28 2183.99 1270.61 Q2182.05 1267.93 2178.67 1267.93 Q2175.29 1267.93 2173.35 1270.61 Q2171.42 1273.28 2171.42 1277.98 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M2221.15 1276.89 L2221.15 1278.97 L2201.56 1278.97 Q2201.84 1283.37 2204.2 1285.68 Q2206.59 1287.98 2210.82 1287.98 Q2213.28 1287.98 2215.57 1287.37 Q2217.88 1286.77 2220.15 1285.57 L2220.15 1289.6 Q2217.86 1290.57 2215.45 1291.08 Q2213.04 1291.59 2210.57 1291.59 Q2204.36 1291.59 2200.73 1287.98 Q2197.12 1284.36 2197.12 1278.21 Q2197.12 1271.84 2200.54 1268.11 Q2203.99 1264.36 2209.83 1264.36 Q2215.06 1264.36 2218.09 1267.74 Q2221.15 1271.1 2221.15 1276.89 M2216.89 1275.64 Q2216.84 1272.14 2214.92 1270.06 Q2213.02 1267.98 2209.87 1267.98 Q2206.31 1267.98 2204.16 1269.99 Q2202.03 1272 2201.7 1275.66 L2216.89 1275.64 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M2228.14 1254.9 L2232.4 1254.9 L2232.4 1290.92 L2228.14 1290.92 L2228.14 1254.9 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><polyline clip-path="url(#clip650)" style="stroke:#e26f46; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1925.03,1325.48 2069.46,1325.48 
  "/>
<path clip-path="url(#clip650)" d="M2111.96 1317.59 L2111.96 1321.62 Q2110.15 1320.7 2108.21 1320.23 Q2106.26 1319.77 2104.18 1319.77 Q2101.01 1319.77 2099.41 1320.74 Q2097.84 1321.71 2097.84 1323.66 Q2097.84 1325.14 2098.97 1326 Q2100.1 1326.83 2103.53 1327.59 L2104.99 1327.92 Q2109.53 1328.89 2111.42 1330.67 Q2113.35 1332.43 2113.35 1335.6 Q2113.35 1339.21 2110.48 1341.32 Q2107.63 1343.43 2102.63 1343.43 Q2100.54 1343.43 2098.28 1343.01 Q2096.03 1342.62 2093.53 1341.81 L2093.53 1337.41 Q2095.89 1338.63 2098.18 1339.26 Q2100.48 1339.86 2102.72 1339.86 Q2105.73 1339.86 2107.35 1338.84 Q2108.97 1337.8 2108.97 1335.93 Q2108.97 1334.19 2107.79 1333.26 Q2106.63 1332.34 2102.67 1331.48 L2101.19 1331.14 Q2097.23 1330.3 2095.48 1328.59 Q2093.72 1326.85 2093.72 1323.84 Q2093.72 1320.19 2096.31 1318.2 Q2098.9 1316.2 2103.67 1316.2 Q2106.03 1316.2 2108.11 1316.55 Q2110.2 1316.9 2111.96 1317.59 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M2119.69 1332.52 L2119.69 1316.83 L2123.95 1316.83 L2123.95 1332.36 Q2123.95 1336.04 2125.38 1337.89 Q2126.82 1339.72 2129.69 1339.72 Q2133.14 1339.72 2135.13 1337.52 Q2137.14 1335.32 2137.14 1331.53 L2137.14 1316.83 L2141.4 1316.83 L2141.4 1342.76 L2137.14 1342.76 L2137.14 1338.77 Q2135.59 1341.13 2133.53 1342.29 Q2131.49 1343.43 2128.79 1343.43 Q2124.32 1343.43 2122 1340.65 Q2119.69 1337.87 2119.69 1332.52 M2130.41 1316.2 L2130.41 1316.2 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M2165.2 1320.81 Q2164.48 1320.39 2163.62 1320.21 Q2162.79 1320 2161.77 1320 Q2158.16 1320 2156.22 1322.36 Q2154.29 1324.7 2154.29 1329.1 L2154.29 1342.76 L2150.01 1342.76 L2150.01 1316.83 L2154.29 1316.83 L2154.29 1320.86 Q2155.64 1318.5 2157.79 1317.36 Q2159.94 1316.2 2163.02 1316.2 Q2163.46 1316.2 2163.99 1316.27 Q2164.53 1316.32 2165.17 1316.44 L2165.2 1320.81 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip650)" d="M2183.85 1320.81 Q2183.14 1320.39 2182.28 1320.21 Q2181.45 1320 2180.43 1320 Q2176.82 1320 2174.87 1322.36 Q2172.95 1324.7 2172.95 1329.1 L2172.95 1342.76 L2168.67 1342.76 L2168.67 1316.83 L2172.95 1316.83 L2172.95 1320.86 Q2174.29 1318.5 2176.45 1317.36 Q2178.6 1316.2 2181.68 1316.2 Q2182.12 1316.2 2182.65 1316.27 Q2183.18 1316.32 2183.83 1316.44 L2183.85 1320.81 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /></svg>
<p>Now we&#39;ll use <a href="#SpectralFitting.optimize_accuracy!"><code>optimize_accuracy!</code></a> to improve the faithfulness of our surrogate. This requires making use of <a href="../reference/#SpectralFitting.wrap_model_as_objective"><code>wrap_model_as_objective</code></a> as a little wrapper around our model:</p><pre><code class="language-julia hljs">obj = wrap_model_as_objective(model)

optimize_accuracy!(surrogate, obj, lower_bounds, upper_bounds; maxiters=250)

length(surrogate.x)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">300</code></pre><p>We can plot the surrogate model again and see the improvement.</p><pre><code class="language-julia hljs">new_f̂ = map(energy[2:end]) do e
    v = (e, ηh_test)
    surrogate(v)
end</code></pre><?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="600" height="400" viewBox="0 0 2400 1600">
<defs>
  <clipPath id="clip710">
    <rect x="0" y="0" width="2400" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip710)" d="
M0 1600 L2400 1600 L2400 0 L0 0  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip711">
    <rect x="480" y="0" width="1681" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip710)" d="
M186.274 1423.18 L2352.76 1423.18 L2352.76 47.2441 L186.274 47.2441  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip712">
    <rect x="186" y="47" width="2167" height="1377"/>
  </clipPath>
</defs>
<polyline clip-path="url(#clip712)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  237.214,1423.18 237.214,47.2441 
  "/>
<polyline clip-path="url(#clip712)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  755.985,1423.18 755.985,47.2441 
  "/>
<polyline clip-path="url(#clip712)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1274.76,1423.18 1274.76,47.2441 
  "/>
<polyline clip-path="url(#clip712)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1793.53,1423.18 1793.53,47.2441 
  "/>
<polyline clip-path="url(#clip712)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  2312.3,1423.18 2312.3,47.2441 
  "/>
<polyline clip-path="url(#clip710)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  186.274,1423.18 2352.76,1423.18 
  "/>
<polyline clip-path="url(#clip710)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  237.214,1423.18 237.214,1404.28 
  "/>
<polyline clip-path="url(#clip710)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  755.985,1423.18 755.985,1404.28 
  "/>
<polyline clip-path="url(#clip710)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1274.76,1423.18 1274.76,1404.28 
  "/>
<polyline clip-path="url(#clip710)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1793.53,1423.18 1793.53,1404.28 
  "/>
<polyline clip-path="url(#clip710)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  2312.3,1423.18 2312.3,1404.28 
  "/>
<path clip-path="url(#clip710)" d="M237.214 1454.1 Q233.603 1454.1 231.774 1457.66 Q229.969 1461.2 229.969 1468.33 Q229.969 1475.44 231.774 1479.01 Q233.603 1482.55 237.214 1482.55 Q240.848 1482.55 242.654 1479.01 Q244.483 1475.44 244.483 1468.33 Q244.483 1461.2 242.654 1457.66 Q240.848 1454.1 237.214 1454.1 M237.214 1450.39 Q243.024 1450.39 246.08 1455 Q249.158 1459.58 249.158 1468.33 Q249.158 1477.06 246.08 1481.67 Q243.024 1486.25 237.214 1486.25 Q231.404 1486.25 228.325 1481.67 Q225.27 1477.06 225.27 1468.33 Q225.27 1459.58 228.325 1455 Q231.404 1450.39 237.214 1450.39 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M746.262 1451.02 L764.619 1451.02 L764.619 1454.96 L750.545 1454.96 L750.545 1463.43 Q751.563 1463.08 752.582 1462.92 Q753.6 1462.73 754.619 1462.73 Q760.406 1462.73 763.785 1465.9 Q767.165 1469.08 767.165 1474.49 Q767.165 1480.07 763.693 1483.17 Q760.221 1486.25 753.901 1486.25 Q751.725 1486.25 749.457 1485.88 Q747.211 1485.51 744.804 1484.77 L744.804 1480.07 Q746.887 1481.2 749.11 1481.76 Q751.332 1482.32 753.809 1482.32 Q757.813 1482.32 760.151 1480.21 Q762.489 1478.1 762.489 1474.49 Q762.489 1470.88 760.151 1468.77 Q757.813 1466.67 753.809 1466.67 Q751.934 1466.67 750.059 1467.08 Q748.207 1467.5 746.262 1468.38 L746.262 1451.02 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M1249.44 1481.64 L1257.08 1481.64 L1257.08 1455.28 L1248.77 1456.95 L1248.77 1452.69 L1257.04 1451.02 L1261.71 1451.02 L1261.71 1481.64 L1269.35 1481.64 L1269.35 1485.58 L1249.44 1485.58 L1249.44 1481.64 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M1288.79 1454.1 Q1285.18 1454.1 1283.35 1457.66 Q1281.55 1461.2 1281.55 1468.33 Q1281.55 1475.44 1283.35 1479.01 Q1285.18 1482.55 1288.79 1482.55 Q1292.43 1482.55 1294.23 1479.01 Q1296.06 1475.44 1296.06 1468.33 Q1296.06 1461.2 1294.23 1457.66 Q1292.43 1454.1 1288.79 1454.1 M1288.79 1450.39 Q1294.6 1450.39 1297.66 1455 Q1300.74 1459.58 1300.74 1468.33 Q1300.74 1477.06 1297.66 1481.67 Q1294.6 1486.25 1288.79 1486.25 Q1282.98 1486.25 1279.91 1481.67 Q1276.85 1477.06 1276.85 1468.33 Q1276.85 1459.58 1279.91 1455 Q1282.98 1450.39 1288.79 1450.39 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M1768.71 1481.64 L1776.35 1481.64 L1776.35 1455.28 L1768.04 1456.95 L1768.04 1452.69 L1776.3 1451.02 L1780.98 1451.02 L1780.98 1481.64 L1788.62 1481.64 L1788.62 1485.58 L1768.71 1485.58 L1768.71 1481.64 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M1798.11 1451.02 L1816.47 1451.02 L1816.47 1454.96 L1802.39 1454.96 L1802.39 1463.43 Q1803.41 1463.08 1804.43 1462.92 Q1805.45 1462.73 1806.47 1462.73 Q1812.25 1462.73 1815.63 1465.9 Q1819.01 1469.08 1819.01 1474.49 Q1819.01 1480.07 1815.54 1483.17 Q1812.07 1486.25 1805.75 1486.25 Q1803.57 1486.25 1801.3 1485.88 Q1799.06 1485.51 1796.65 1484.77 L1796.65 1480.07 Q1798.73 1481.2 1800.96 1481.76 Q1803.18 1482.32 1805.66 1482.32 Q1809.66 1482.32 1812 1480.21 Q1814.34 1478.1 1814.34 1474.49 Q1814.34 1470.88 1812 1468.77 Q1809.66 1466.67 1805.66 1466.67 Q1803.78 1466.67 1801.91 1467.08 Q1800.05 1467.5 1798.11 1468.38 L1798.11 1451.02 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M2291.07 1481.64 L2307.39 1481.64 L2307.39 1485.58 L2285.44 1485.58 L2285.44 1481.64 Q2288.11 1478.89 2292.69 1474.26 Q2297.3 1469.61 2298.48 1468.27 Q2300.72 1465.74 2301.6 1464.01 Q2302.5 1462.25 2302.5 1460.56 Q2302.5 1457.8 2300.56 1456.07 Q2298.64 1454.33 2295.54 1454.33 Q2293.34 1454.33 2290.88 1455.09 Q2288.45 1455.86 2285.68 1457.41 L2285.68 1452.69 Q2288.5 1451.55 2290.95 1450.97 Q2293.41 1450.39 2295.44 1450.39 Q2300.81 1450.39 2304.01 1453.08 Q2307.2 1455.77 2307.2 1460.26 Q2307.2 1462.39 2306.39 1464.31 Q2305.61 1466.2 2303.5 1468.8 Q2302.92 1469.47 2299.82 1472.69 Q2296.72 1475.88 2291.07 1481.64 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M2327.2 1454.1 Q2323.59 1454.1 2321.76 1457.66 Q2319.96 1461.2 2319.96 1468.33 Q2319.96 1475.44 2321.76 1479.01 Q2323.59 1482.55 2327.2 1482.55 Q2330.84 1482.55 2332.64 1479.01 Q2334.47 1475.44 2334.47 1468.33 Q2334.47 1461.2 2332.64 1457.66 Q2330.84 1454.1 2327.2 1454.1 M2327.2 1450.39 Q2333.01 1450.39 2336.07 1455 Q2339.15 1459.58 2339.15 1468.33 Q2339.15 1477.06 2336.07 1481.67 Q2333.01 1486.25 2327.2 1486.25 Q2321.39 1486.25 2318.31 1481.67 Q2315.26 1477.06 2315.26 1468.33 Q2315.26 1459.58 2318.31 1455 Q2321.39 1450.39 2327.2 1450.39 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M1159.07 1520.52 L1189.12 1520.52 L1189.12 1525.93 L1165.5 1525.93 L1165.5 1540 L1188.13 1540 L1188.13 1545.41 L1165.5 1545.41 L1165.5 1562.63 L1189.69 1562.63 L1189.69 1568.04 L1159.07 1568.04 L1159.07 1520.52 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M1234.79 1518.58 Q1230.53 1525.9 1228.46 1533.06 Q1226.39 1540.23 1226.39 1547.58 Q1226.39 1554.93 1228.46 1562.16 Q1230.56 1569.35 1234.79 1576.64 L1229.7 1576.64 Q1224.92 1569.16 1222.54 1561.93 Q1220.18 1554.71 1220.18 1547.58 Q1220.18 1540.48 1222.54 1533.29 Q1224.89 1526.09 1229.7 1518.58 L1234.79 1518.58 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M1245.93 1518.52 L1251.82 1518.52 L1251.82 1547.77 L1269.29 1532.4 L1276.77 1532.4 L1257.87 1549.07 L1277.57 1568.04 L1269.93 1568.04 L1251.82 1550.63 L1251.82 1568.04 L1245.93 1568.04 L1245.93 1518.52 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M1312.07 1548.76 L1312.07 1551.62 L1285.14 1551.62 Q1285.52 1557.67 1288.77 1560.85 Q1292.05 1564 1297.87 1564 Q1301.25 1564 1304.4 1563.17 Q1307.58 1562.35 1310.7 1560.69 L1310.7 1566.23 Q1307.55 1567.57 1304.24 1568.27 Q1300.93 1568.97 1297.52 1568.97 Q1288.99 1568.97 1284 1564 Q1279.03 1559.04 1279.03 1550.57 Q1279.03 1541.82 1283.74 1536.69 Q1288.48 1531.54 1296.51 1531.54 Q1303.7 1531.54 1307.87 1536.18 Q1312.07 1540.8 1312.07 1548.76 M1306.21 1547.04 Q1306.15 1542.23 1303.51 1539.37 Q1300.9 1536.5 1296.57 1536.5 Q1291.67 1536.5 1288.71 1539.27 Q1285.78 1542.04 1285.33 1547.07 L1306.21 1547.04 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M1334.19 1568.04 L1316.05 1520.52 L1322.76 1520.52 L1337.82 1560.53 L1352.91 1520.52 L1359.59 1520.52 L1341.48 1568.04 L1334.19 1568.04 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M1365.35 1518.58 L1370.44 1518.58 Q1375.22 1526.09 1377.57 1533.29 Q1379.96 1540.48 1379.96 1547.58 Q1379.96 1554.71 1377.57 1561.93 Q1375.22 1569.16 1370.44 1576.64 L1365.35 1576.64 Q1369.58 1569.35 1371.65 1562.16 Q1373.75 1554.93 1373.75 1547.58 Q1373.75 1540.23 1371.65 1533.06 Q1369.58 1525.9 1365.35 1518.58 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><polyline clip-path="url(#clip712)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  186.274,1368.25 2352.76,1368.25 
  "/>
<polyline clip-path="url(#clip712)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  186.274,1060.84 2352.76,1060.84 
  "/>
<polyline clip-path="url(#clip712)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  186.274,753.425 2352.76,753.425 
  "/>
<polyline clip-path="url(#clip712)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  186.274,446.014 2352.76,446.014 
  "/>
<polyline clip-path="url(#clip712)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  186.274,138.602 2352.76,138.602 
  "/>
<polyline clip-path="url(#clip710)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  186.274,1423.18 186.274,47.2441 
  "/>
<polyline clip-path="url(#clip710)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  186.274,1368.25 205.172,1368.25 
  "/>
<polyline clip-path="url(#clip710)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  186.274,1060.84 205.172,1060.84 
  "/>
<polyline clip-path="url(#clip710)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  186.274,753.425 205.172,753.425 
  "/>
<polyline clip-path="url(#clip710)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  186.274,446.014 205.172,446.014 
  "/>
<polyline clip-path="url(#clip710)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  186.274,138.602 205.172,138.602 
  "/>
<path clip-path="url(#clip710)" d="M62.9365 1354.05 Q59.3254 1354.05 57.4967 1357.61 Q55.6912 1361.15 55.6912 1368.28 Q55.6912 1375.39 57.4967 1378.95 Q59.3254 1382.5 62.9365 1382.5 Q66.5707 1382.5 68.3763 1378.95 Q70.205 1375.39 70.205 1368.28 Q70.205 1361.15 68.3763 1357.61 Q66.5707 1354.05 62.9365 1354.05 M62.9365 1350.34 Q68.7467 1350.34 71.8022 1354.95 Q74.8809 1359.53 74.8809 1368.28 Q74.8809 1377.01 71.8022 1381.62 Q68.7467 1386.2 62.9365 1386.2 Q57.1264 1386.2 54.0477 1381.62 Q50.9921 1377.01 50.9921 1368.28 Q50.9921 1359.53 54.0477 1354.95 Q57.1264 1350.34 62.9365 1350.34 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M83.0984 1379.65 L87.9827 1379.65 L87.9827 1385.53 L83.0984 1385.53 L83.0984 1379.65 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M108.168 1354.05 Q104.557 1354.05 102.728 1357.61 Q100.922 1361.15 100.922 1368.28 Q100.922 1375.39 102.728 1378.95 Q104.557 1382.5 108.168 1382.5 Q111.802 1382.5 113.608 1378.95 Q115.436 1375.39 115.436 1368.28 Q115.436 1361.15 113.608 1357.61 Q111.802 1354.05 108.168 1354.05 M108.168 1350.34 Q113.978 1350.34 117.033 1354.95 Q120.112 1359.53 120.112 1368.28 Q120.112 1377.01 117.033 1381.62 Q113.978 1386.2 108.168 1386.2 Q102.358 1386.2 99.2789 1381.62 Q96.2234 1377.01 96.2234 1368.28 Q96.2234 1359.53 99.2789 1354.95 Q102.358 1350.34 108.168 1350.34 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M138.33 1354.05 Q134.719 1354.05 132.89 1357.61 Q131.084 1361.15 131.084 1368.28 Q131.084 1375.39 132.89 1378.95 Q134.719 1382.5 138.33 1382.5 Q141.964 1382.5 143.769 1378.95 Q145.598 1375.39 145.598 1368.28 Q145.598 1361.15 143.769 1357.61 Q141.964 1354.05 138.33 1354.05 M138.33 1350.34 Q144.14 1350.34 147.195 1354.95 Q150.274 1359.53 150.274 1368.28 Q150.274 1377.01 147.195 1381.62 Q144.14 1386.2 138.33 1386.2 Q132.519 1386.2 129.441 1381.62 Q126.385 1377.01 126.385 1368.28 Q126.385 1359.53 129.441 1354.95 Q132.519 1350.34 138.33 1350.34 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M63.9319 1046.64 Q60.3208 1046.64 58.4921 1050.2 Q56.6865 1053.74 56.6865 1060.87 Q56.6865 1067.98 58.4921 1071.54 Q60.3208 1075.08 63.9319 1075.08 Q67.5661 1075.08 69.3717 1071.54 Q71.2004 1067.98 71.2004 1060.87 Q71.2004 1053.74 69.3717 1050.2 Q67.5661 1046.64 63.9319 1046.64 M63.9319 1042.93 Q69.742 1042.93 72.7976 1047.54 Q75.8763 1052.12 75.8763 1060.87 Q75.8763 1069.6 72.7976 1074.2 Q69.742 1078.79 63.9319 1078.79 Q58.1217 1078.79 55.043 1074.2 Q51.9875 1069.6 51.9875 1060.87 Q51.9875 1052.12 55.043 1047.54 Q58.1217 1042.93 63.9319 1042.93 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M84.0938 1072.24 L88.978 1072.24 L88.978 1078.12 L84.0938 1078.12 L84.0938 1072.24 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M103.191 1074.18 L119.51 1074.18 L119.51 1078.12 L97.566 1078.12 L97.566 1074.18 Q100.228 1071.43 104.811 1066.8 Q109.418 1062.14 110.598 1060.8 Q112.844 1058.28 113.723 1056.54 Q114.626 1054.78 114.626 1053.09 Q114.626 1050.34 112.682 1048.6 Q110.76 1046.87 107.658 1046.87 Q105.459 1046.87 103.006 1047.63 Q100.575 1048.39 97.7974 1049.95 L97.7974 1045.22 Q100.621 1044.09 103.075 1043.51 Q105.529 1042.93 107.566 1042.93 Q112.936 1042.93 116.131 1045.62 Q119.325 1048.3 119.325 1052.79 Q119.325 1054.92 118.515 1056.84 Q117.728 1058.74 115.621 1061.33 Q115.043 1062.01 111.941 1065.22 Q108.839 1068.42 103.191 1074.18 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M129.371 1043.56 L147.728 1043.56 L147.728 1047.49 L133.654 1047.49 L133.654 1055.96 Q134.672 1055.62 135.691 1055.45 Q136.709 1055.27 137.728 1055.27 Q143.515 1055.27 146.894 1058.44 Q150.274 1061.61 150.274 1067.03 Q150.274 1072.61 146.802 1075.71 Q143.33 1078.79 137.01 1078.79 Q134.834 1078.79 132.566 1078.42 Q130.32 1078.05 127.913 1077.31 L127.913 1072.61 Q129.996 1073.74 132.219 1074.3 Q134.441 1074.85 136.918 1074.85 Q140.922 1074.85 143.26 1072.75 Q145.598 1070.64 145.598 1067.03 Q145.598 1063.42 143.26 1061.31 Q140.922 1059.2 136.918 1059.2 Q135.043 1059.2 133.168 1059.62 Q131.316 1060.04 129.371 1060.92 L129.371 1043.56 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M62.9365 739.224 Q59.3254 739.224 57.4967 742.789 Q55.6912 746.33 55.6912 753.46 Q55.6912 760.566 57.4967 764.131 Q59.3254 767.673 62.9365 767.673 Q66.5707 767.673 68.3763 764.131 Q70.205 760.566 70.205 753.46 Q70.205 746.33 68.3763 742.789 Q66.5707 739.224 62.9365 739.224 M62.9365 735.52 Q68.7467 735.52 71.8022 740.127 Q74.8809 744.71 74.8809 753.46 Q74.8809 762.187 71.8022 766.793 Q68.7467 771.376 62.9365 771.376 Q57.1264 771.376 54.0477 766.793 Q50.9921 762.187 50.9921 753.46 Q50.9921 744.71 54.0477 740.127 Q57.1264 735.52 62.9365 735.52 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M83.0984 764.826 L87.9827 764.826 L87.9827 770.705 L83.0984 770.705 L83.0984 764.826 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M98.2141 736.145 L116.57 736.145 L116.57 740.08 L102.496 740.08 L102.496 748.552 Q103.515 748.205 104.534 748.043 Q105.552 747.858 106.571 747.858 Q112.358 747.858 115.737 751.029 Q119.117 754.201 119.117 759.617 Q119.117 765.196 115.645 768.298 Q112.172 771.376 105.853 771.376 Q103.677 771.376 101.409 771.006 Q99.1632 770.636 96.7558 769.895 L96.7558 765.196 Q98.8391 766.33 101.061 766.886 Q103.284 767.441 105.76 767.441 Q109.765 767.441 112.103 765.335 Q114.441 763.228 114.441 759.617 Q114.441 756.006 112.103 753.9 Q109.765 751.793 105.76 751.793 Q103.885 751.793 102.01 752.21 Q100.159 752.627 98.2141 753.506 L98.2141 736.145 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M138.33 739.224 Q134.719 739.224 132.89 742.789 Q131.084 746.33 131.084 753.46 Q131.084 760.566 132.89 764.131 Q134.719 767.673 138.33 767.673 Q141.964 767.673 143.769 764.131 Q145.598 760.566 145.598 753.46 Q145.598 746.33 143.769 742.789 Q141.964 739.224 138.33 739.224 M138.33 735.52 Q144.14 735.52 147.195 740.127 Q150.274 744.71 150.274 753.46 Q150.274 762.187 147.195 766.793 Q144.14 771.376 138.33 771.376 Q132.519 771.376 129.441 766.793 Q126.385 762.187 126.385 753.46 Q126.385 744.71 129.441 740.127 Q132.519 735.52 138.33 735.52 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M63.9319 431.812 Q60.3208 431.812 58.4921 435.377 Q56.6865 438.919 56.6865 446.048 Q56.6865 453.155 58.4921 456.719 Q60.3208 460.261 63.9319 460.261 Q67.5661 460.261 69.3717 456.719 Q71.2004 453.155 71.2004 446.048 Q71.2004 438.919 69.3717 435.377 Q67.5661 431.812 63.9319 431.812 M63.9319 428.109 Q69.742 428.109 72.7976 432.715 Q75.8763 437.298 75.8763 446.048 Q75.8763 454.775 72.7976 459.381 Q69.742 463.965 63.9319 463.965 Q58.1217 463.965 55.043 459.381 Q51.9875 454.775 51.9875 446.048 Q51.9875 437.298 55.043 432.715 Q58.1217 428.109 63.9319 428.109 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M84.0938 457.414 L88.978 457.414 L88.978 463.294 L84.0938 463.294 L84.0938 457.414 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M97.9826 428.734 L120.205 428.734 L120.205 430.724 L107.658 463.294 L102.774 463.294 L114.58 432.669 L97.9826 432.669 L97.9826 428.734 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M129.371 428.734 L147.728 428.734 L147.728 432.669 L133.654 432.669 L133.654 441.141 Q134.672 440.794 135.691 440.632 Q136.709 440.446 137.728 440.446 Q143.515 440.446 146.894 443.618 Q150.274 446.789 150.274 452.206 Q150.274 457.784 146.802 460.886 Q143.33 463.965 137.01 463.965 Q134.834 463.965 132.566 463.594 Q130.32 463.224 127.913 462.483 L127.913 457.784 Q129.996 458.919 132.219 459.474 Q134.441 460.03 136.918 460.03 Q140.922 460.03 143.26 457.923 Q145.598 455.817 145.598 452.206 Q145.598 448.595 143.26 446.488 Q140.922 444.382 136.918 444.382 Q135.043 444.382 133.168 444.798 Q131.316 445.215 129.371 446.095 L129.371 428.734 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M53.7467 151.947 L61.3856 151.947 L61.3856 125.581 L53.0754 127.248 L53.0754 122.989 L61.3393 121.322 L66.0152 121.322 L66.0152 151.947 L73.654 151.947 L73.654 155.882 L53.7467 155.882 L53.7467 151.947 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M83.0984 150.002 L87.9827 150.002 L87.9827 155.882 L83.0984 155.882 L83.0984 150.002 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M108.168 124.401 Q104.557 124.401 102.728 127.965 Q100.922 131.507 100.922 138.637 Q100.922 145.743 102.728 149.308 Q104.557 152.849 108.168 152.849 Q111.802 152.849 113.608 149.308 Q115.436 145.743 115.436 138.637 Q115.436 131.507 113.608 127.965 Q111.802 124.401 108.168 124.401 M108.168 120.697 Q113.978 120.697 117.033 125.303 Q120.112 129.887 120.112 138.637 Q120.112 147.363 117.033 151.97 Q113.978 156.553 108.168 156.553 Q102.358 156.553 99.2789 151.97 Q96.2234 147.363 96.2234 138.637 Q96.2234 129.887 99.2789 125.303 Q102.358 120.697 108.168 120.697 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M138.33 124.401 Q134.719 124.401 132.89 127.965 Q131.084 131.507 131.084 138.637 Q131.084 145.743 132.89 149.308 Q134.719 152.849 138.33 152.849 Q141.964 152.849 143.769 149.308 Q145.598 145.743 145.598 138.637 Q145.598 131.507 143.769 127.965 Q141.964 124.401 138.33 124.401 M138.33 120.697 Q144.14 120.697 147.195 125.303 Q150.274 129.887 150.274 138.637 Q150.274 147.363 147.195 151.97 Q144.14 156.553 138.33 156.553 Q132.519 156.553 129.441 151.97 Q126.385 147.363 126.385 138.637 Q126.385 129.887 129.441 125.303 Q132.519 120.697 138.33 120.697 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><polyline clip-path="url(#clip712)" style="stroke:#009af9; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  247.59,1368.25 268.445,1368.25 289.301,1368.25 310.156,1368.24 331.012,1367.73 351.868,1357.36 372.723,1316.07 393.579,1240.2 414.434,1142.7 435.29,1042.43 
  456.146,923.151 477.001,825.111 497.857,741.835 518.713,657.212 539.568,584.917 560.424,526.394 581.279,477.445 602.135,433.2 622.991,395.764 643.846,365.994 
  664.702,340.843 685.558,317.447 706.413,297.378 727.269,280.093 748.124,265.149 768.98,252.175 789.836,240.87 810.691,230.981 831.547,222.299 852.403,214.952 
  873.258,208.472 894.114,202.432 914.969,197.058 935.825,192.261 956.681,215.438 977.536,236.776 998.392,229.973 1019.25,223.819 1040.1,218.201 1060.96,213.02 
  1081.81,208.273 1102.67,204.754 1123.53,201.543 1144.38,197.766 1165.24,194.282 1186.09,191.064 1206.95,188.086 1227.8,185.328 1248.66,182.769 1269.51,180.392 
  1290.37,178.181 1311.23,176.122 1332.08,174.203 1352.94,172.411 1373.79,170.736 1394.65,169.17 1415.5,167.703 1436.36,166.328 1457.22,165.038 1478.07,163.826 
  1498.93,162.687 1519.78,161.614 1540.64,160.605 1561.49,159.653 1582.35,158.754 1603.2,157.906 1624.06,157.105 1644.92,156.347 1665.77,155.63 1686.63,154.951 
  1707.48,154.307 1728.34,153.696 1749.19,153.117 1770.05,152.566 1790.91,152.043 1811.76,151.546 1832.62,151.072 1853.47,150.622 1874.33,150.192 1895.18,149.783 
  1916.04,149.393 1936.89,149.021 1957.75,148.665 1978.61,148.326 1999.46,148.001 2020.32,147.691 2041.17,147.394 2062.03,147.11 2082.88,146.837 2103.74,146.577 
  2124.6,146.327 2145.45,146.087 2166.31,145.857 2187.16,145.637 2208.02,145.425 2228.87,145.222 2249.73,145.026 2270.58,144.838 2291.44,144.658 
  "/>
<polyline clip-path="url(#clip712)" style="stroke:#e26f46; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  247.59,1019.59 268.445,1005.51 289.301,990.543 310.156,974.644 331.012,957.788 351.868,939.939 372.723,921.05 393.579,901.036 414.434,879.74 435.29,856.838 
  456.146,831.685 477.001,803.157 497.857,770.04 518.713,732.303 539.568,691.307 560.424,648.537 581.279,605.016 602.135,561.414 622.991,518.242 643.846,475.983 
  664.702,435.187 685.558,396.58 706.413,361.139 727.269,329.985 748.124,303.854 768.98,282.572 789.836,265.304 810.691,251.169 831.547,239.507 852.403,229.859 
  873.258,221.894 894.114,215.35 914.969,210.014 935.825,205.703 956.681,202.257 977.536,199.532 998.392,197.394 1019.25,195.712 1040.1,194.359 1060.96,193.203 
  1081.81,192.117 1102.67,190.985 1123.53,189.72 1144.38,188.278 1165.24,186.662 1186.09,184.907 1206.95,183.068 1227.8,181.2 1248.66,179.347 1269.51,177.547 
  1290.37,175.823 1311.23,174.193 1332.08,172.665 1352.94,171.243 1373.79,169.927 1394.65,168.71 1415.5,167.578 1436.36,166.506 1457.22,165.45 1478.07,164.379 
  1498.93,163.31 1519.78,162.274 1540.64,161.283 1561.49,160.342 1582.35,159.444 1603.2,158.585 1624.06,157.755 1644.92,156.951 1665.77,156.17 1686.63,155.434 
  1707.48,154.806 1728.34,154.285 1749.19,153.781 1770.05,153.237 1790.91,152.623 1811.76,151.919 1832.62,151.107 1853.47,150.169 1874.33,149.086 1895.18,147.843 
  1916.04,146.422 1936.89,144.808 1957.75,142.989 1978.61,140.957 1999.46,138.706 2020.32,136.231 2041.17,133.532 2062.03,130.61 2082.88,127.468 2103.74,124.113 
  2124.6,120.554 2145.45,116.8 2166.31,112.864 2187.16,108.761 2208.02,104.503 2228.87,100.105 2249.73,95.578 2270.58,90.9348 2291.44,86.1857 
  "/>
<polyline clip-path="url(#clip712)" style="stroke:#3da44d; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  247.59,1379.21 268.445,1383.49 289.301,1384.24 310.156,1377.57 331.012,1359.46 351.868,1325.03 372.723,1258.3 393.579,1167.14 414.434,1065.82 435.29,961.008 
  456.146,859.089 477.001,766.264 497.857,685.769 518.713,616.544 539.568,556.797 560.424,505.269 581.279,460.654 602.135,421.695 622.991,387.432 643.846,357.194 
  664.702,330.502 685.558,307.006 706.413,286.441 727.269,268.573 748.124,253.147 768.98,239.903 789.836,228.625 810.691,219.164 831.547,211.441 852.403,205.464 
  873.258,201.409 894.114,199.924 914.969,203.924 935.825,218.542 956.681,236.56 977.536,233.993 998.392,229.656 1019.25,225.817 1040.1,222.099 1060.96,218.328 
  1081.81,214.501 1102.67,210.691 1123.53,206.976 1144.38,203.405 1165.24,199.999 1186.09,196.753 1206.95,193.653 1227.8,190.682 1248.66,187.825 1269.51,185.068 
  1290.37,182.401 1311.23,179.816 1332.08,177.31 1352.94,174.883 1373.79,172.541 1394.65,170.303 1415.5,168.209 1436.36,166.332 1457.22,164.718 1478.07,163.325 
  1498.93,162.082 1519.78,160.948 1540.64,159.905 1561.49,158.944 1582.35,158.058 1603.2,157.245 1624.06,156.504 1644.92,155.838 1665.77,155.266 1686.63,154.836 
  1707.48,154.553 1728.34,154.361 1749.19,154.224 1770.05,154.128 1790.91,154.065 1811.76,154.027 1832.62,154.007 1853.47,153.994 1874.33,153.979 1895.18,153.949 
  1916.04,153.891 1936.89,153.795 1957.75,153.651 1978.61,153.449 1999.46,153.18 2020.32,152.834 2041.17,152.403 2062.03,151.875 2082.88,151.237 2103.74,150.476 
  2124.6,149.576 2145.45,148.518 2166.31,147.284 2187.16,145.854 2208.02,144.206 2228.87,142.324 2249.73,140.189 2270.58,137.788 2291.44,135.113 
  "/>
<path clip-path="url(#clip710)" d="
M1900.95 1377.32 L2280.54 1377.32 L2280.54 1169.96 L1900.95 1169.96  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<polyline clip-path="url(#clip710)" style="stroke:#000000; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1900.95,1377.32 2280.54,1377.32 2280.54,1169.96 1900.95,1169.96 1900.95,1377.32 
  "/>
<polyline clip-path="url(#clip710)" style="stroke:#009af9; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1925.03,1221.8 2069.46,1221.8 
  "/>
<path clip-path="url(#clip710)" d="M2113.88 1218.13 Q2115.48 1215.26 2117.7 1213.89 Q2119.92 1212.52 2122.93 1212.52 Q2126.98 1212.52 2129.18 1215.37 Q2131.38 1218.2 2131.38 1223.43 L2131.38 1239.08 L2127.1 1239.08 L2127.1 1223.57 Q2127.1 1219.84 2125.78 1218.03 Q2124.46 1216.23 2121.75 1216.23 Q2118.44 1216.23 2116.52 1218.43 Q2114.6 1220.63 2114.6 1224.42 L2114.6 1239.08 L2110.31 1239.08 L2110.31 1223.57 Q2110.31 1219.82 2108.99 1218.03 Q2107.67 1216.23 2104.92 1216.23 Q2101.66 1216.23 2099.73 1218.45 Q2097.81 1220.65 2097.81 1224.42 L2097.81 1239.08 L2093.53 1239.08 L2093.53 1213.15 L2097.81 1213.15 L2097.81 1217.18 Q2099.27 1214.79 2101.31 1213.66 Q2103.35 1212.52 2106.15 1212.52 Q2108.97 1212.52 2110.94 1213.96 Q2112.93 1215.39 2113.88 1218.13 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M2149.92 1216.14 Q2146.49 1216.14 2144.5 1218.82 Q2142.51 1221.48 2142.51 1226.14 Q2142.51 1230.79 2144.48 1233.47 Q2146.47 1236.14 2149.92 1236.14 Q2153.32 1236.14 2155.31 1233.45 Q2157.3 1230.77 2157.3 1226.14 Q2157.3 1221.53 2155.31 1218.84 Q2153.32 1216.14 2149.92 1216.14 M2149.92 1212.52 Q2155.47 1212.52 2158.65 1216.14 Q2161.82 1219.75 2161.82 1226.14 Q2161.82 1232.5 2158.65 1236.14 Q2155.47 1239.75 2149.92 1239.75 Q2144.34 1239.75 2141.17 1236.14 Q2138.02 1232.5 2138.02 1226.14 Q2138.02 1219.75 2141.17 1216.14 Q2144.34 1212.52 2149.92 1212.52 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M2185.94 1217.08 L2185.94 1203.06 L2190.2 1203.06 L2190.2 1239.08 L2185.94 1239.08 L2185.94 1235.19 Q2184.6 1237.5 2182.53 1238.64 Q2180.5 1239.75 2177.63 1239.75 Q2172.93 1239.75 2169.97 1236 Q2167.03 1232.25 2167.03 1226.14 Q2167.03 1220.02 2169.97 1216.27 Q2172.93 1212.52 2177.63 1212.52 Q2180.5 1212.52 2182.53 1213.66 Q2184.6 1214.77 2185.94 1217.08 M2171.42 1226.14 Q2171.42 1230.83 2173.35 1233.52 Q2175.29 1236.18 2178.67 1236.18 Q2182.05 1236.18 2183.99 1233.52 Q2185.94 1230.83 2185.94 1226.14 Q2185.94 1221.44 2183.99 1218.77 Q2182.05 1216.09 2178.67 1216.09 Q2175.29 1216.09 2173.35 1218.77 Q2171.42 1221.44 2171.42 1226.14 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M2221.15 1225.05 L2221.15 1227.13 L2201.56 1227.13 Q2201.84 1231.53 2204.2 1233.84 Q2206.59 1236.14 2210.82 1236.14 Q2213.28 1236.14 2215.57 1235.53 Q2217.88 1234.93 2220.15 1233.73 L2220.15 1237.76 Q2217.86 1238.73 2215.45 1239.24 Q2213.04 1239.75 2210.57 1239.75 Q2204.36 1239.75 2200.73 1236.14 Q2197.12 1232.52 2197.12 1226.37 Q2197.12 1220 2200.54 1216.27 Q2203.99 1212.52 2209.83 1212.52 Q2215.06 1212.52 2218.09 1215.9 Q2221.15 1219.26 2221.15 1225.05 M2216.89 1223.8 Q2216.84 1220.3 2214.92 1218.22 Q2213.02 1216.14 2209.87 1216.14 Q2206.31 1216.14 2204.16 1218.15 Q2202.03 1220.16 2201.7 1223.82 L2216.89 1223.8 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M2228.14 1203.06 L2232.4 1203.06 L2232.4 1239.08 L2228.14 1239.08 L2228.14 1203.06 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><polyline clip-path="url(#clip710)" style="stroke:#e26f46; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1925.03,1273.64 2069.46,1273.64 
  "/>
<path clip-path="url(#clip710)" d="M2111.96 1265.75 L2111.96 1269.78 Q2110.15 1268.86 2108.21 1268.39 Q2106.26 1267.93 2104.18 1267.93 Q2101.01 1267.93 2099.41 1268.9 Q2097.84 1269.87 2097.84 1271.82 Q2097.84 1273.3 2098.97 1274.16 Q2100.1 1274.99 2103.53 1275.75 L2104.99 1276.08 Q2109.53 1277.05 2111.42 1278.83 Q2113.35 1280.59 2113.35 1283.76 Q2113.35 1287.37 2110.48 1289.48 Q2107.63 1291.59 2102.63 1291.59 Q2100.54 1291.59 2098.28 1291.17 Q2096.03 1290.78 2093.53 1289.97 L2093.53 1285.57 Q2095.89 1286.79 2098.18 1287.42 Q2100.48 1288.02 2102.72 1288.02 Q2105.73 1288.02 2107.35 1287 Q2108.97 1285.96 2108.97 1284.09 Q2108.97 1282.35 2107.79 1281.42 Q2106.63 1280.5 2102.67 1279.64 L2101.19 1279.3 Q2097.23 1278.46 2095.48 1276.75 Q2093.72 1275.01 2093.72 1272 Q2093.72 1268.35 2096.31 1266.36 Q2098.9 1264.36 2103.67 1264.36 Q2106.03 1264.36 2108.11 1264.71 Q2110.2 1265.06 2111.96 1265.75 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M2119.69 1280.68 L2119.69 1264.99 L2123.95 1264.99 L2123.95 1280.52 Q2123.95 1284.2 2125.38 1286.05 Q2126.82 1287.88 2129.69 1287.88 Q2133.14 1287.88 2135.13 1285.68 Q2137.14 1283.48 2137.14 1279.69 L2137.14 1264.99 L2141.4 1264.99 L2141.4 1290.92 L2137.14 1290.92 L2137.14 1286.93 Q2135.59 1289.29 2133.53 1290.45 Q2131.49 1291.59 2128.79 1291.59 Q2124.32 1291.59 2122 1288.81 Q2119.69 1286.03 2119.69 1280.68 M2130.41 1264.36 L2130.41 1264.36 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M2165.2 1268.97 Q2164.48 1268.55 2163.62 1268.37 Q2162.79 1268.16 2161.77 1268.16 Q2158.16 1268.16 2156.22 1270.52 Q2154.29 1272.86 2154.29 1277.26 L2154.29 1290.92 L2150.01 1290.92 L2150.01 1264.99 L2154.29 1264.99 L2154.29 1269.02 Q2155.64 1266.66 2157.79 1265.52 Q2159.94 1264.36 2163.02 1264.36 Q2163.46 1264.36 2163.99 1264.43 Q2164.53 1264.48 2165.17 1264.6 L2165.2 1268.97 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M2183.85 1268.97 Q2183.14 1268.55 2182.28 1268.37 Q2181.45 1268.16 2180.43 1268.16 Q2176.82 1268.16 2174.87 1270.52 Q2172.95 1272.86 2172.95 1277.26 L2172.95 1290.92 L2168.67 1290.92 L2168.67 1264.99 L2172.95 1264.99 L2172.95 1269.02 Q2174.29 1266.66 2176.45 1265.52 Q2178.6 1264.36 2181.68 1264.36 Q2182.12 1264.36 2182.65 1264.43 Q2183.18 1264.48 2183.83 1264.6 L2183.85 1268.97 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><polyline clip-path="url(#clip710)" style="stroke:#3da44d; stroke-linecap:butt; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1925.03,1325.48 2069.46,1325.48 
  "/>
<path clip-path="url(#clip710)" d="M2111.96 1317.59 L2111.96 1321.62 Q2110.15 1320.7 2108.21 1320.23 Q2106.26 1319.77 2104.18 1319.77 Q2101.01 1319.77 2099.41 1320.74 Q2097.84 1321.71 2097.84 1323.66 Q2097.84 1325.14 2098.97 1326 Q2100.1 1326.83 2103.53 1327.59 L2104.99 1327.92 Q2109.53 1328.89 2111.42 1330.67 Q2113.35 1332.43 2113.35 1335.6 Q2113.35 1339.21 2110.48 1341.32 Q2107.63 1343.43 2102.63 1343.43 Q2100.54 1343.43 2098.28 1343.01 Q2096.03 1342.62 2093.53 1341.81 L2093.53 1337.41 Q2095.89 1338.63 2098.18 1339.26 Q2100.48 1339.86 2102.72 1339.86 Q2105.73 1339.86 2107.35 1338.84 Q2108.97 1337.8 2108.97 1335.93 Q2108.97 1334.19 2107.79 1333.26 Q2106.63 1332.34 2102.67 1331.48 L2101.19 1331.14 Q2097.23 1330.3 2095.48 1328.59 Q2093.72 1326.85 2093.72 1323.84 Q2093.72 1320.19 2096.31 1318.2 Q2098.9 1316.2 2103.67 1316.2 Q2106.03 1316.2 2108.11 1316.55 Q2110.2 1316.9 2111.96 1317.59 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M2119.69 1332.52 L2119.69 1316.83 L2123.95 1316.83 L2123.95 1332.36 Q2123.95 1336.04 2125.38 1337.89 Q2126.82 1339.72 2129.69 1339.72 Q2133.14 1339.72 2135.13 1337.52 Q2137.14 1335.32 2137.14 1331.53 L2137.14 1316.83 L2141.4 1316.83 L2141.4 1342.76 L2137.14 1342.76 L2137.14 1338.77 Q2135.59 1341.13 2133.53 1342.29 Q2131.49 1343.43 2128.79 1343.43 Q2124.32 1343.43 2122 1340.65 Q2119.69 1337.87 2119.69 1332.52 M2130.41 1316.2 L2130.41 1316.2 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M2165.2 1320.81 Q2164.48 1320.39 2163.62 1320.21 Q2162.79 1320 2161.77 1320 Q2158.16 1320 2156.22 1322.36 Q2154.29 1324.7 2154.29 1329.1 L2154.29 1342.76 L2150.01 1342.76 L2150.01 1316.83 L2154.29 1316.83 L2154.29 1320.86 Q2155.64 1318.5 2157.79 1317.36 Q2159.94 1316.2 2163.02 1316.2 Q2163.46 1316.2 2163.99 1316.27 Q2164.53 1316.32 2165.17 1316.44 L2165.2 1320.81 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M2183.85 1320.81 Q2183.14 1320.39 2182.28 1320.21 Q2181.45 1320 2180.43 1320 Q2176.82 1320 2174.87 1322.36 Q2172.95 1324.7 2172.95 1329.1 L2172.95 1342.76 L2168.67 1342.76 L2168.67 1316.83 L2172.95 1316.83 L2172.95 1320.86 Q2174.29 1318.5 2176.45 1317.36 Q2178.6 1316.2 2181.68 1316.2 Q2182.12 1316.2 2182.65 1316.27 Q2183.18 1316.32 2183.83 1316.44 L2183.85 1320.81 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip710)" d="M2205.66 1313.03 L2205.66 1325.93 L2218.55 1325.93 L2218.55 1329.86 L2205.66 1329.86 L2205.66 1342.76 L2201.77 1342.76 L2201.77 1329.86 L2188.88 1329.86 L2188.88 1325.93 L2201.77 1325.93 L2201.77 1313.03 L2205.66 1313.03 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /></svg>
<p>Tight. We can also inspect the memory footprint of our model:</p><pre><code class="language-julia hljs"># in bytes
Base.summarysize(surrogate)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">9808</code></pre><p>This may be reduced by lowering <code>maxiters</code> in <a href="#SpectralFitting.optimize_accuracy!"><code>optimize_accuracy!</code></a> at the cost of decreasing faithfulness. However, compare this to the Fortran tabulated source file in the XSPEC source code, which is approximately 224 Kb – about 22x larger. The surrogate models are considerably more portable at this level.</p><p>Inspecting the plot shows that there is a small domain near zero energy where the surrogate is calculating a negative value. We can either try to improve the accuracy to fix this, or specify a clamping function: for <a href="../models/#SpectralFitting.XS_PhotoelectricAbsorption"><code>XS_PhotoelectricAbsorption</code></a>, we know the multiplicative factor is constrained between 0 and 1. Therefore, we may adjust our surrogate to reflect this:</p><pre><code class="language-julia hljs">clamped_surrogate = (v) -&gt; clamp(surrogate(v), 0.0, 1.0)</code></pre><h2 id="Using-a-surrogate-spectral-model"><a class="docs-heading-anchor" href="#Using-a-surrogate-spectral-model">Using a surrogate spectral model</a><a id="Using-a-surrogate-spectral-model-1"></a><a class="docs-heading-anchor-permalink" href="#Using-a-surrogate-spectral-model" title="Permalink"></a></h2><p>Now that we have the surrogate model, we use <a href="#SpectralFitting.SurrogateSpectralModel"><code>SurrogateSpectralModel</code></a> to wrap it into an <a href="../using-models/#SpectralFitting.AbstractSpectralModel"><code>AbstractSpectralModel</code></a>. The constructor also needs to know the model kind, have a copy of the model parameters, and know which symbols to represent the parameters with.</p><pre><code class="language-julia hljs">sm = SurrogateSpectralModel(
    Multiplicative(),
    clamped_surrogate,
    (FitParam(1.0),), # must be a tuple
    (:ηh,) # must also be a tuple
)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">SurrogateSpectralModel{Multiplicative}
   ηh  =&gt; (1 ± 0.1)
</code></pre><p>We can now use the familiar API and attempt to benchmark the performance:</p><pre><code class="language-julia hljs">@btime invokemodel!($flux, $energy, $sm);</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">  50.406 μs (297 allocations: 6.19 KiB)
</code><button class="copy-button fas fa-copy"></button></pre><p>These allocations are coming from the global closure we have in the  <code>clamped_surrogate</code> lambda. We can actually elide these using a proper closure:</p><pre><code class="language-julia hljs">make_surr(surrogate) = SpectralFitting.SurrogateSpectralModel(
    Multiplicative(),
    (v) -&gt; clamp(surrogate(v), 0.0, 1.0),
    (FitParam(1.0),),
    (:ηH,)
)

sm2 = make_surr(surrogate)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">SurrogateSpectralModel{Multiplicative}
   ηH  =&gt; (1 ± 0.1)
</code></pre><p>Now when we benchmark</p><pre><code class="language-julia hljs">@btime invokemodel!($flux, $energy, $sm2);</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">  46.228 μs (0 allocations: 0 bytes)
</code><button class="copy-button fas fa-copy"></button></pre><p>Comparing this to the initial benchmark of <a href="../models/#SpectralFitting.XS_PhotoelectricAbsorption"><code>XS_PhotoelectricAbsorption</code></a>, we see about a 60x speedup, with no allocations, <em>and</em> this surrogate model is now automatic differentiation ready.</p><h2 id="Sharing-surrogate-models"><a class="docs-heading-anchor" href="#Sharing-surrogate-models">Sharing surrogate models</a><a id="Sharing-surrogate-models-1"></a><a class="docs-heading-anchor-permalink" href="#Sharing-surrogate-models" title="Permalink"></a></h2><p>To export and import surrogate models, <a href="https://github.com/JuliaIO/JLD2.jl">JLD2.jl</a> is recommended.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../composite-models/">« Composite models</a><a class="docs-footer-nextpage" href="../reference/">Reference »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.22 on <span class="colophon-date" title="Monday 22 August 2022 16:07">Monday 22 August 2022</span>. Using Julia version 1.7.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
